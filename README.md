# <a id='up'>News Portal</a>

### Оглавление:
- [Полезные адреса для ознакомления с работой](#1)
- [Аккаунты](#2)
- [Модуль D6 - Работа с почтой и выполнение задач по расписанию](#3)
- [Модуль D7 - Работа с асинхронными задачами через Celery](#4)
- [Модуль D8 - Кэширование](#5)
- [Модуль D11 - Безопасность](#6)
- [Модуль D13 - Продвинутые возможности работы с Django](#7)

### <a id='1'>Полезные адреса для ознакомления с работой</a>:
- http://127.0.0.1:8000/posts/ - все посты
- http://127.0.0.1:8000/accounts/signup/ - регистрация (все зарегистрированные пользователи (кроме авторизации через Yandex) добавляются в категорию authors)
- http://127.0.0.1:8000/accounts/login/ - логин
---

### <a id='2'>Аккаунты</a>:
- Admin
```
login: admin
password: admin
```


- popovd1994@gmail.com
```
login: popovd1994@gmail.com
password: Dima123456
```

---
## <a id='3'>Модуль D6</a> - Работа с почтой и выполнение задач по расписанию
- Добавлена возможность подписываться на категории публикаций. При создании публикации подписчику на указанную почту при регистрации будет отправляться краткое содержание поста с гиперссылкой на сайт поста.
- Добавлено приветственное письмо при регистрации на портале и ссылкой на подтверждение регистрации.
- Добавлено ограничение на количество пуликаций для одного автора - не более трех в сутки.
- Реализована еженедельная рассылка публикаций подписчикам.  

Данные с которой будет осуществляться рассылка сообщений на почту подписчикам находятся в файле .env в директории с файлом manage.py

---
## <a id='4'>Модуль D7</a> - Работа с асинхронными задачами через Celery
- Доработан функционал по рассылки сообщений подписчикам модуля D6. При помощи Redis и библеотеки Celery данные задачи теперь выполняются в асинхронном режиме.  

Алгоритм запуска:
1. Отдельно от PyCharm запускаем терминал Ubuntu и включаем редис сервер:
```
redis-server
```
2. В PyCharm открываем терминал Windows и запускаем на нем приложение:
```
python manage.py runserver
```
3. В PyCharm открываем терминал Ubuntu и запускаем Celery
```
celery -A NP worker -l INFO -B
```
P.S. Весь функционал по работе с celery закоментирован по невозможности его использования на пк, на котором прохожу большую часть курса.

---
## <a id='5'>Модуль D8</a> - Кэширование
- Добавлено кеширование в различные участки приложения
- Добавлено кеширование статьи до момента ее изменения

---
## <a id='6'>Модуль D11</a> - Безопасность
- Добавлена команда для manage.py "deleteposts", которая удаляет все публикации заданной категории.
- Доработана панель администратора, добавлен удобный вывод информации и фильтры.

---
## <a id='7'>Модуль D13</a> - Продвинутые возможности работы с Django
- Доработан фильтр (создавался в прошлых модулях), цензурирующий нежелательные слова.
- Настроена система логирования:
1. В консоль выводятся все сообщения уровня DEBUG и выше, включающие время, уровень сообщения, сообщения. Для сообщений WARNING и выше дополнительно выводится путь к источнику события. А для сообщений ERROR и CRITICAL еще выводится стэк ошибки. Сюда попадают все сообщения с основного логгера django.
2. В файл general.log выводятся сообщения уровня INFO и выше только с указанием времени, уровня логирования, модуля, в котором возникло сообщение и само сообщение. Сюда также попадают сообщения с регистратора django.
3. В файл errors.log выводятся сообщения только уровня ERROR и CRITICAL. В сообщении указывается время, уровень логирования, само сообщение, путь к источнику сообщения и стэк ошибки. В этот файл попадают сообщения только из логгеров django.request, django.server, django.template, django.db.backends.
4. В файл security.log попадают только сообщения, связанные с безопасностью, а значит только из логгера django.security. Формат вывода предполагает время, уровень логирования, модуль и сообщение.
5. На почту отправляются сообщения уровней ERROR и выше из django.request и django.server по формату, как в errors.log, но без стэка ошибок.  

В консоль сообщения отправляются только при DEBUG = True, а на почту и в файл general.log — только при DEBUG = False.  
[Вверх](#up)
